--- RCPTT testcase ---
Format-Version: 1.0
Contexts: _pjyZ0Af5Eee0EKWnoBYU9g,_d8aMACuvEeW667Afdo4DcA,_2Q6oEPOSEeaWpbE3jg39cA,_OCxtEBRGEeWWV9IuysVI_A,_kJ0i8BXWEeW05sQKg0mypw
Element-Name: RemoteDebugForWrongTest
Element-Type: testcase
Element-Version: 3.0
External-Reference: 
Id: _-6fSwAjXEee0EKWnoBYU9g
Runtime-Version: 2.1.0.201606221726
Save-Time: 3/21/17 1:24 PM
Tags: Debug
Testcase-Type: ecl

------=_.content-0a7243a0-75d3-3d5f-9791-539de0e5b7ac
Content-Type: text/ecl
Entry-Name: .content

//here project name and test name are different


//decrease timeout
get-preferences-menu | click
with [get-window Preferences] {
    get-tree | select "Robot Framework/Default Launch Configurations"
    get-group "Listener tab" | get-editbox -after [get-label "Server connection timeout [s]:"] | set-text 15
    get-button Apply | click
    get-button OK | click
}

with [get-view "Project Explorer" | get-tree] {
    select MediumRobotTest | double-click
    select "MediumRobotTest/Script.robot" | double-click
}
  
//set BP
with [get-editor "Script.robot" | get-left-ruler | get-ruler-column AnnotationColumn] {
    click-ruler -line 15
    double-click-ruler 15
}


let [val path_to_project  [format "%s\Remote" $user_folder] ]{
	//export listener
	get-preferences-menu | click
	get-window Preferences | get-tree | select "Robot Framework/Default Launch Configurations"
	set-dialog-result Folder $path_to_project
	
	with [get-window Preferences] {
	    get-group "Listener tab" | get-button "Export Client Script" | click
	    get-button OK | click
	}

	//run test
	exec-with-options -disableJobWaiting -command {
		get-view "Project Explorer" | get-tree | select "MediumRobotTest/Script.robot" 
		    | get-menu "Debug As/2 Robot Remote Test" | click
		
		wait-for-remote-connection 
		
		
		if [get-by-os -linux "Linux" -win "Windows"| equals "Windows"]{
			exec-process  "cmd.exe"  "/c" "start" "\"\""  "\"python.exe\"" "-m" "robot.run" "--listener" [concat "\"" $path_to_project "\\TestRunnerAgent.py:43981\""]  "-s" "RemoteProject.TestFile" [concat "\"" $path_to_project "\\RemoteProject\""] -timeout 3		
		}-else{
			exec-process  "gnome-terminal" "-e" [format "python -m robot.run --listener %s/TestRunnerAgent.py:43981 -s RemoteProject.TestFile %s/RemoteProject" $path_to_project $path_to_project] -timeout 3
			wait 2000
		}    
		get-window "Debug Execution Context Error" 
		    | get-label "Invalid execution context: suite='TestFile.robot', name='BuiltIn.Log', type='Keyword', args='[]'" 
		    | get-property caption 
		    | equals "Invalid execution context: suite='TestFile.robot', name='BuiltIn.Log', type='Keyword', args='[]'" 
		    | verify-true
		get-window "Debug Execution Context Error" | get-button OK | click	

	}

}
------=_.content-0a7243a0-75d3-3d5f-9791-539de0e5b7ac--
