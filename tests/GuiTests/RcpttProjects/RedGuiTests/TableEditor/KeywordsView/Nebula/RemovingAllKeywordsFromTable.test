--- RCPTT testcase ---
Format-Version: 1.0
Contexts: _YI1vUFJyEea8WJ7bbC6OBw
Element-Name: RemovingAllKeywordsFromTable
Element-Type: testcase
Element-Version: 3.0
External-Reference: 
Id: _kHOH0E6LEeaiR4l81oXgMw
Runtime-Version: 2.1.0.201606221726
Save-Time: 8/12/16 12:07 PM
Testcase-Type: ecl

------=_.content-0a7243a0-75d3-3d5f-9791-539de0e5b7ac
Content-Type: text/ecl
Entry-Name: .content

//add keywords
get-view "Project Explorer" | get-tree | select "RobotProject/TestFile.robot" | double-click
get-editor "TestFile.robot" | get-text-viewer | set-text "*** Test Cases ***\n"
    + "test 1\n"
    + "    Log    7\n"
    + "    \n"
    + "*** Keyword ***\n"
    + "Keyword\n"
    + "    [Timeout]    58\n"
    + "    Should Be Equal As Numbers    5353    99999    \n"
    + "    \n"
    + "Kw with arg\n"
    + "    [Arguments]  ${a}\n"
    + "    Convert To List    888\n"
    + "    \n"
    + "*** Settings ***\n"
    + "Library    Collections\n\n\n"
    + "*** Keywords ***\n"
    + "lol\n"
    + "    log    7    \n"
    + "    \n"
    + "3 keyword\n"
    + "    [Arguments]    ${a}\n"
    + "    Should Contain    text    in text\n"
    + "    [Return]    text" 
    
//save file    
with [get-editor "TestFile.robot"] {
    with [get-text-viewer] {
        set-caret-pos 7 8
        key-type "M1+s"
    }
    get-tab-folder | get-tab-item Keywords | click
}

//select kewyword in Outline
get-view Outline | get-tree | select "TestFile.robot/Keywords/Keyword/Should Be Equal As Numbers"

//set cell in edit mode and remove section
with [get-editor "TestFile.robot"] {
    with [get-canvas -after [get-label "User Keywords"] -index 1] {
        key-type Right
        key-type Enter
    }
    get-button "Delete Keywords section" | click
}

wait 2000
//check if no row is now
with [get-editor "TestFile.robot"] {
    with [get-canvas -after [get-link "Section is not yet defined, do you want to create it?"]] {
        get-property "getLayer().getBodyLayer().getColumnCount()" | equals 7 | verify-true
        get-property "getLayer().getBodyLayer().getRowCount()" | equals 0 | verify-true
    }
    get-link "Section is not yet defined, do you want to create it?" | get-property caption 
        | equals "Section is not yet defined, do you want to create it?" | verify-true
    get-button "Delete Keywords section" | get-property enablement | equals false | verify-true
}

//check Source
get-editor "TestFile.robot" | get-tab-folder | get-tab-item Source | click
get-editor "TestFile.robot" | get-text-viewer | get-property text | equals "*** Test Cases ***\n"
    + "test 1\n"
    + "    Log    7\n"
    + "    \n"
    + "*** Settings ***\n"
    + "Library    Collections" | verify-true

//go to KW table
get-editor "TestFile.robot" | get-tab-folder | get-tab-item Keywords | click

//add section
get-editor "TestFile.robot" | get-link "Section is not yet defined, do you want to create it?" | click

with [get-editor "TestFile.robot"] {
    get-button "Delete Keywords section" | get-property tooltip | equals "Delete Keywords section" | verify-true
    with [get-canvas -after [get-label "User Keywords"] -index 1] {
        get-property "getLayer().getBodyLayer().getColumnCount()" | equals 7 | verify-true
        get-property "getLayer().getBodyLayer().getRowCount()" | equals 1 | verify-true
    }
}    

check-keyword-row -file "TestFile.robot" -row 1  -kw "...add new keyword"


get-editor "TestFile.robot"| get-tab-folder | get-tab-item Source | click

get-editor "TestFile.robot" | get-text-viewer | get-property text | equals "*** Test Cases ***\n"
    + "test 1\n"
    + "    Log    7\n"
    + "    \n"
    + "*** Settings ***\n"
    + "Library    Collections\n"
    + "*** Keyword ***" | verify-true
------=_.content-0a7243a0-75d3-3d5f-9791-539de0e5b7ac--
