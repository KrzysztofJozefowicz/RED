--- RCPTT testcase ---
Format-Version: 1.0
Element-Name: CutPasteRowsInKeywords
Element-Type: testcase
Element-Version: 3.0
External-Reference: 
Id: _OPRvEF18EeaRBaqqj0N1Gg
Runtime-Version: 2.1.0.201606221726
Save-Time: 3/10/17 2:16 PM
Tags: notTestable
Testcase-Type: ecl

------=_.description-216f885c-d591-38ce-8ea2-e4f8cb4d6ffa
Content-Type: text/plain
Entry-Name: .description

newst bug: RED-536 
corrected bugs:
RED-458
RED-459
------=_.description-216f885c-d591-38ce-8ea2-e4f8cb4d6ffa--
------=_.content-0a7243a0-75d3-3d5f-9791-539de0e5b7ac
Content-Type: text/ecl
Entry-Name: .content

get-view "Project Explorer" | get-tree | select "RobotProject/TestFile.robot" | double-click

// check Copy Past rows of KW parent - RED-458

// set default source 
get-editor "TestFile.robot" | get-text-viewer | set-text "*** Test Cases ***\n"
    + "*** Keywords ***\n"
    + "kw1\n"
    + "    log  1\n"
    + "    [return]  9\n"
    + "   \n"
    + "kw-2\n"
    + "    Should Be Empty    item       \n"
    + "   \n"
    + "kw3\n"
    + "    [Documentation]    doc\n"
    + "    a1\n"
    + "    a2\n"
    + "    a3\n"
    + "       \n"
    + "kw4\n"
    + "    Set Log Level    5\n"
    + "    Catenate    a  3\n"
    + "    \n"
    + "kw5\n"
    + "    \\" 
    
get-editor "TestFile.robot" | get-text-viewer | key-type "M1+s"    
get-editor "TestFile.robot" | get-tab-folder | get-tab-item Keywords | click

// select parent KW-2 and copy row (copy whole parent)
get-view Outline | get-tree | select "TestFile.robot/Keywords/kw-2" | click
wait 300
get-editor "TestFile.robot" | get-canvas -after [get-label "User Keywords"] -index 1 | get-menu "Row/Copy row" | click

// select kw4 (parent) past double KW-2, both should be pasted above current
get-view Outline | get-tree | select "TestFile.robot/Keywords/kw4"
with [get-editor "TestFile.robot"] {
    with [get-canvas -after [get-label "User Keywords"] -index 1] {
        get-menu "Row/Paste row" | click
        get-menu "Row/Paste row" | click
    }
    get-tab-folder | get-tab-item Source | click
}

// verify
get-editor "TestFile.robot" | get-text-viewer | get-property text | equals "*** Test Cases ***\n"
    + "*** Keywords ***\n"
    + "kw1\n"
    + "    log  1\n"
    + "    [return]  9\n"
    + "kw-2\n"
    + "    Should Be Empty    item       \n"
    + "kw3\n"
    + "    [Documentation]    doc\n"
    + "    a1\n"
    + "    a2\n"
    + "    a3\n"
    + "kw- 4\n"
    + "    Should Be Empty    item\n"
    + "kw- 3\n"
    + "    Should Be Empty    item\n"
    + "kw4\n"
    + "    Set Log Level    5\n"
    + "    Catenate    a  3\n"
    + "kw5\n"
    + "    \\" | verify-true
    
//------------------------------------------------------------------------------------
//bug RED-536 
get-editor "TestFile.robot" | get-text-viewer | set-text "*** Test Cases ***\n"
    + "*** Keywords ***\n"
    + "kw1\n"
    + "    log  1\n"
    + "    [return]  9\n"
    + "   \n"
    + "kw-2\n"
    + "    Should Be Empty    item       \n"
    + "   \n"
    + "kw3\n"
    + "    [Documentation]    doc\n"
    + "    a1\n"
    + "    a2\n"
    + "    a3\n"
    + "       \n"
    + "kw4\n"
    + "    Set Log Level    5\n"
    + "    Catenate    a  3\n"
    + "    \n"
    + "kw5\n"
    + "    \\" 
    
get-editor "TestFile.robot" | get-text-viewer | key-type "M1+s"    
get-editor "TestFile.robot" | get-tab-folder | get-tab-item Keywords | click
wait 1000    

//cut kw-2
get-view Outline | get-tree | select "TestFile.robot/Keywords/kw-2" | click
get-editor "TestFile.robot" | get-canvas -after [get-label "User Keywords"] -index 1 | get-menu "Row/Cut row" | click

//paste it when selection is om kw5
get-view Outline | get-tree | select "TestFile.robot/Keywords/kw5" | click

with [get-editor "TestFile.robot" | get-canvas -after [get-label "User Keywords"] -index 1] {
    get-menu "Row/Paste row" | click
    //go to Catenate and cut line when selction is on "a"
    key-type Up -times 2
    key-type Right
    get-menu "Row/Cut row" | click
}



//cut empty line
get-view Outline | get-tree | select "TestFile.robot/Keywords/kw5" |  click
wait 300
with [get-editor "TestFile.robot"] {
    with [get-canvas -after [get-label "User Keywords"] -index 1] {
        key-type Down -times 2
        key-type Enter
    }
    with [get-canvas -after [get-label "User Keywords"] -index 1] {
        get-menu "Row/Cut row" | click
	}
}

//go to "..." and paste empty line
get-view Outline | get-tree | select "TestFile.robot/Keywords/kw4" | click
wait 500
with [get-editor "TestFile.robot"] {
    with [get-canvas -after [get-label "User Keywords"] -index 1] {
        key-type Down -times 2
        get-menu "Row/Paste row" | click
        key-type Enter
    }
    with [get-editbox -after [get-label "User Keywords"] -index 1] {
        type-text "this was empty line"
        key-type "NUMPAD_ENTER" "\\u000D"
    }
    get-editbox -after [get-label "User Keywords"] -index 1 | key-type Esc
}


//go to documentation and cut it
with [get-editor "TestFile.robot"] {
    with [get-canvas -after [get-label "User Keywords"] -index 1] {
        key-type Up -times 7
        key-type "M1+M2+x"
    }
}

//paste as first line in kw4 (it will be added to Source at the end)
get-view Outline | get-tree | select "TestFile.robot/Keywords/kw4" | click
wait 300
with [get-editor "TestFile.robot" | get-canvas -after [get-label "User Keywords"] -index 1] {
    key-type Down
    key-type "M1+M2+v"
}

//blad tu jest doc powinen byc na koncu kw matki
get-editor "TestFile.robot" | get-tab-folder | get-tab-item Source | click


//bug created here: RED-536 
get-editor "TestFile.robot" | get-text-viewer | get-property text | equals "*** Test Cases ***\n"
    + "*** Keywords ***\n"
    + "kw1\n"
    + "    log  1\n"
    + "    [return]  9\n"
    + "kw3\n"
    + "    a1\n"
    + "    a2\n"
    + "    a3\n"
    + "kw4\n"
    + "    [Documentation]    doc\n"
    + "    Set Log Level    5\n"
    + "    this was empty line\n"
    + "kw-2\n"
    + "    Should Be Empty    item\n"
    + "kw5\n"
    + "    \\" | verify-true
    
//to-do wklejanie 2x tego samego, wklejanie [set] do isniejacej i innego kw
    
------=_.content-0a7243a0-75d3-3d5f-9791-539de0e5b7ac--
