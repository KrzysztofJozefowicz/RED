--- RCPTT testcase ---
Format-Version: 1.0
Contexts: _7-QNADzcEeWxlsQvwWxD9w
Element-Name: ExpandCollapsKeywords
Element-Type: testcase
Element-Version: 3.0
External-Reference: 
Id: _MBZLUEAQEeW20a8v9jefTQ
Runtime-Version: 2.0.0.201506120617
Save-Time: 8/11/15 3:54 PM
Testcase-Type: ecl

------=_.content-0a7243a0-75d3-3d5f-9791-539de0e5b7ac
Content-Type: text/ecl
Entry-Name: .content

with [get-view "Project Explorer" | get-tree] {
    select RobotProject | select RobotProject | double-click
    select "RobotProject/TestFile.robot" | select "RobotProject/TestFile.robot" | double-click
}
with [get-editor "TestFile.robot"] {
    get-tab-folder | get-tab-item Keywords | click
    get-link "Section is not yet defined, do you want to create it?" | click
}


//add keywords
add-keyword-with-elements-by-arrows -keyword_name "my loop" -elements [list ":FOR" "${i}" "in range  2"] -script_name "TestFile.robot" 
add-row-to-keyword-by-double-click-on-cell -keyword_name "my loop" -keyword_index 0 -elements [list "\\"] -command_index 0 -script_name "TestFile.robot" 
add-row-to-keyword-by-arrows-end-enter -keyword_name "my loop" -keyword_index 0 -elements [list "\\" "${eval}="  "Evaluate  ${i} +5"] -script_name "TestFile.robot" 

add-keyword-with-elements-by-arrows -keyword_name "Only Log" -elements [list "Log" "Test!"] -script_name "TestFile.robot" 

add-keyword-with-elements-by-arrows -keyword_name "Make dict" -elements [list "${dict} =" "Create Dictionary" "name" "value"] -script_name "TestFile.robot" 
add-row-to-keyword-by-arrows-end-enter -keyword_name "Make dict" -keyword_index 0 -elements [list "${values} =" "Get Dictionary Values"  "${dict}"]  -script_name "TestFile.robot"

add-keywords-by-typing-enter -keywords_list [list "New keyword" ""] -script_name "TestFile.robot" 
//collaps all
get-editor "TestFile.robot" | get-tree | select "Make dict" | select "Make dict" | get-menu "Table/Collapse All" | click
with [get-editor "TestFile.robot" | get-tree] {
    get-item "my loop" | get-property "getExpanded()" | equals false | verify-true
    get-item "Only Log" | get-property "getExpanded()" | equals false | verify-true
    get-item "Make dict" | get-property "getExpanded()" | equals false | verify-true
    get-item "New keyword" | get-property "getExpanded()" | equals false | verify-true
    get-item "" | get-property "getExpanded()" | equals false | verify-true
}

//expand all
get-editor "TestFile.robot" | get-tree | select "New keyword" | select "New keyword" | get-menu "Table/Expand All" 
    | click
    
with [get-editor "TestFile.robot" | get-tree] {
    get-item "my loop" | get-property "getExpanded()" | equals true | verify-true
    get-item "Only Log" | get-property "getExpanded()" | equals true | verify-true
    get-item "Make dict" | get-property "getExpanded()" | equals true | verify-true
    get-item "New keyword" | get-property "getExpanded()" | equals true | verify-true
    get-item "" | get-property "getExpanded()" | equals true | verify-true
}

//expand one more time and check if nothing changed
get-editor "TestFile.robot" | get-tree | select "my loop" | get-menu "Table/Expand All" 
    | click
    
with [get-editor "TestFile.robot" | get-tree] {
    get-item "my loop" | get-property "getExpanded()" | equals true | verify-true
    get-item "Only Log" | get-property "getExpanded()" | equals true | verify-true
    get-item "Make dict" | get-property "getExpanded()" | equals true | verify-true
    get-item "New keyword" | get-property "getExpanded()" | equals true | verify-true
    get-item "" | get-property "getExpanded()" | equals true | verify-true
}

//save -  everything is collapsed - it will be changed
get-button "Save (Ctrl+S)" | click

//last element is remove because it was empty
with [get-editor "TestFile.robot" | get-tree] {
    get-item "my loop" | get-property "getExpanded()" | equals false | verify-true
    get-item "Only Log" | get-property "getExpanded()" | equals false | verify-true
    get-item "Make dict" | get-property "getExpanded()" | equals false | verify-true
    get-item "New keyword" | get-property "getExpanded()" | equals false | verify-true
}
------=_.content-0a7243a0-75d3-3d5f-9791-539de0e5b7ac--
