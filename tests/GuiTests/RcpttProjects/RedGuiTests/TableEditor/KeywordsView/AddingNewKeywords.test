--- RCPTT testcase ---
Format-Version: 1.0
Contexts: _7-QNADzcEeWxlsQvwWxD9w
Element-Name: AddingNewKeywords
Element-Type: testcase
Element-Version: 3.0
External-Reference: 
Id: _qkXbIDz_EeWUyZKiCzynFQ
Runtime-Version: 2.0.0.201506120617
Save-Time: 11/20/15 2:57 PM
Tags: Unstable
Testcase-Type: ecl
Verifications: _bkC_ID0WEeWUyZKiCzynFQ,_btCaQETxEeWq-NHkm2i3yA,_73UJYETxEeWq-NHkm2i3yA

------=_.content-0a7243a0-75d3-3d5f-9791-539de0e5b7ac
Content-Type: text/ecl
Entry-Name: .content

//check outline before tests
get-view Outline | get-label "An outline is not available." | get-property caption 
    | equals "An outline is not available." | verify-true

//check that test has empty Test Case section
with [get-view "Project Explorer" | get-tree] {
    get-item "RobotProject/TestFile.robot" | get-property childCount | equals 1 | verify-true
    get-item "RobotProject/TestFile.robot" | get-property "getItems().TreeItem[0].getText()" | equals "Test Cases" 
        | verify-true
    get-item "RobotProject/TestFile.robot" | get-property "getItems().TreeItem[0].getItemCount()" | equals 0 
        | verify-true
}

//open editor
get-view "Project Explorer" | get-tree | select "RobotProject/TestFile.robot" | double-click

//check outline - test name is added with empty Test Case section
with [get-view Outline | get-tree] {
    get-property "getItemCount()" | equals 1 | verify-true
    get-property "getItems().TreeItem[0].getItems().length" | equals 1 | verify-true
    get-property "getItems().TreeItem[0].getItems().TreeItem[0].getItemCount()" | equals 0 | verify-true
    get-property "getItems().TreeItem[0].getItems().TreeItem[0].getText()" | equals "Test Cases" | verify-true
    get-property "getItems().TreeItem[0].getText()" | equals "TestFile.robot" | verify-true
}

//PE has still no children
get-view "Project Explorer" | get-tree | get-item "RobotProject/TestFile.robot" | get-property childCount | equals 1
    | verify-true
    
// add Keywords section in Source 
with [get-editor "TestFile.robot"] {
    get-tab-folder | get-tab-item Source | click
    with [get-text-viewer] {
        set-caret-pos 1 19
        key-type Enter
		type-text "*** Keywords ***"
        key-type Enter
    }
    get-tab-folder | get-tab-item Keywords | click
}    


get-menu "File/Save" | click
wait 1000
get-editor "TestFile.robot" | close

get-view "Project Explorer" | get-tree | select "RobotProject/TestFile.robot" 
    | double-click
    
//check if in Source is only Keywords section    
get-editor "TestFile.robot" | get-tab-folder | get-tab-item Source | click
get-editor "TestFile.robot" | get-text-viewer | get-property text | equals "*** Test Cases ***\n"
    + "*** Keywords ***" | verify-true
get-editor "TestFile.robot" | get-tab-folder | get-tab-item Keywords | click

//add keyword by navigation by arrows and accpet by Enter
add-keyword-with-elements-by-arrows -keyword_name "Example 1 " -elements [list "@{list} =" "Create List"  "first" "second" "third"] -script_name "TestFile.robot"
add-row-to-keyword-by-arrows-end-enter -keyword_name "Example 1 " -keyword_index 0 -elements [list "Length Should Be" "${list}" "3"] -script_name "TestFile.robot"
add-row-to-keyword-by-arrows-end-enter -keyword_name "Example 1 " -keyword_index 0 -elements [list "Log Many" "@{list}"] -script_name "TestFile.robot"

//add keyword by double click
add-keyword-with-elements-by-double-click -keyword_name "Open Login Page" -elements [list "Open Browser" "http://host/login.html" "" "" "" "" "this is for selenium"] -script_name "TestFile.robot"
add-row-to-keyword-by-double-click-on-cell -keyword_name "Open Login Page" -keyword_index 0 -elements [list "Title Should Be"  "Login Page"]  -command_index 0 -script_name "TestFile.robot"


//check outline - it is collapsed
get-view Outline | get-tree | get-item "TestFile.robot/Keywords" | get-property "getExpanded()" | equals false 
    | verify-true

//expand outline
with [get-view Outline | get-tree] {
    select "TestFile.robot/Keywords/Example 1 /.*" | click
    select "TestFile.robot/Keywords/Open Login Page/.*" | click
}
   
with [get-view Outline | get-tree] {
    get-property "getItems().TreeItem[0].getItems().TreeItem[0].getItems().TreeItem[0].getItems().TreeItem[0].getText()" 
        | equals "@{list} =" | verify-true
    get-property "getItems().TreeItem[0].getItems().TreeItem[0].getItems().TreeItem[0].getItems().TreeItem[1].getText()" 
        | equals "Length Should Be" | verify-true
    get-property "getItems().TreeItem[0].getItems().TreeItem[0].getItems().TreeItem[0].getItems().TreeItem[2].getText()" 
        | equals "Log Many" | verify-true
    get-property "getItems().TreeItem[0].getItems().TreeItem[0].getItems().TreeItem[0].getText()" | equals "Example 1" 
        | verify-true
    get-property "getItems().TreeItem[0].getItems().TreeItem[0].getItems().TreeItem[1].getItems().TreeItem[0].getText()" 
        | equals "Open Browser" | verify-true
    get-property "getItems().TreeItem[0].getItems().TreeItem[0].getItems().TreeItem[1].getItems().TreeItem[1].getText()" 
        | equals "Title Should Be" | verify-true
    get-property "getItems().TreeItem[0].getItems().TreeItem[0].getItems().TreeItem[1].getText()" 
        | equals "Open Login Page" | verify-true
    get-property "getItems().TreeItem[0].getItems().TreeItem[0].getText()" | equals Keywords | verify-true
    get-property "getItems().TreeItem[0].getText()" | equals "TestFile.robot" | verify-true
}

//check PE - it is collpsed
get-view "Project Explorer" | get-tree | get-item "RobotProject/TestFile.robot/Keywords" | get-property "getExpanded()" 
    | equals false | verify-true
    
with [get-view "Project Explorer" | get-tree] {
    get-item "RobotProject/TestFile.robot/Keywords" | get-property "getItems().TreeItem[0].getText()" 
        | equals "Example 1" | verify-true
    get-item "RobotProject/TestFile.robot/Keywords" | get-property "getItems().TreeItem[1].getText()" 
        | equals "Open Login Page" | verify-true
    get-item "RobotProject/TestFile.robot/Keywords" | get-property "getText()" | equals Keywords | verify-true
}

//add keywords with arguments
add-keyword-with-args-by-arrows -keywords_name "Three aruments"  -arguments [list "${arg1}" "${arg2}" "${arg3}" "" "" "comment"] -script_name "TestFile.robot"
add-row-to-keyword-by-arrows-end-enter -keyword_name "Three aruments"  -keyword_index 0 -elements [list "Log" "1st argument: ${arg1}"] -script_name "TestFile.robot"
add-row-to-keyword-by-arrows-end-enter -keyword_name "Three aruments"  -keyword_index 0 -elements [list "Log" "2nd argument: ${arg2}"] -script_name "TestFile.robot"
add-row-to-keyword-by-arrows-end-enter -keyword_name "Three aruments"  -keyword_index 0 -elements [list "Log" "3rd argument: ${arg3}"] -script_name "TestFile.robot"
    
add-keyword-by-double-click -keywords_list [list "Empty Keyword 1" "Empty keyword 2"] -script_name "TestFile.robot"
add-keyword-by-double-click -keywords_list [list "Compare bin"]-script_name "TestFile.robot"

add-row-to-keyword-by-double-click-on-cell -keyword_name "Compare bin" -keyword_index 0 -elements [list "Should Be Equal" "${0b1011}" "${11}"] -command_index 0 -script_name "TestFile.robot"

//expand all to verification
with [get-view Outline | get-tree] {
    select "TestFile.robot/Keywords/Example 1 /.*" | click
    select "TestFile.robot/Keywords/Open Login Page/.*" | click
    select "TestFile.robot/Keywords/Three aruments/.*" | click
     select "TestFile.robot/Keywords/Compare bin/.*" | click
}


------=_.content-0a7243a0-75d3-3d5f-9791-539de0e5b7ac--
