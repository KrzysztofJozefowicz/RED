--- RCPTT testcase ---
Format-Version: 1.0
Contexts: _zKaAYG-LEeas5uogJbgGYA,_hb89IDvxEeiDC73Fvf4wHA
Element-Name: OpenDocumentationViewFromMenu
Element-Type: testcase
Element-Version: 3.0
External-Reference: 
Id: _cKvDgIbgEeaPRdjThepTww
Runtime-Version: 2.2.0.201706152316
Save-Time: 5/8/18 6:34 PM
Testcase-Type: ecl

------=_.content-0a7243a0-75d3-3d5f-9791-539de0e5b7ac
Content-Type: text/ecl
Entry-Name: .content

//opem documentation for build in KW
get-view "Project Explorer" | get-tree 
    | select "RobotProject/Robot Standard libraries \\[.*\\]/BuiltIn \\(103\\)/Comment" 
    | double-click
    
check-documentation-view -kw_name Comment -project_name "RobotProject"  -library BuiltIn  -arguments "\[\*messages\]" 
	-spec "Displays the given messages in the log file as keyword arguments.*"
get-view "Documentation View" | close    

//open doc by menu
get-view "Project Explorer" | get-tree 
    | select "RobotProject/Robot Standard libraries \\[.*\\]/BuiltIn \\(103\\)/No Operation" 
    | get-menu -path "Show keyword documentation" | click
    
check-documentation-view -kw_name "No Operation" -project_name "RobotProject"  -library BuiltIn  -arguments "\[\]" 
	-spec "Does absolutely nothing."
get-view "Documentation View" | close  


//change focus to execution view
get-view "Execution View" | click
get-view "Project Explorer" | get-tree 
    | select "RobotProject/Robot Standard libraries \\[.*\\]/BuiltIn \\(103\\)/Get Time" 
    | get-menu -path "Show keyword documentation" | click
    
check-documentation-view -kw_name "Get Time" -project_name "RobotProject"  -library BuiltIn  -arguments "\[format=timestamp, time_=NOW\]"  
	-spec "Returns the given time in the requested format.*"
get-view "Documentation View" | close  

//collapse all and open suite
with [get-view "Project Explorer"] {
    get-button "Collapse All  (M1+M2+Numpad_Divide)" | click
    get-tree | select "RobotProject/checking_doc.robot" | double-click
}

//---------------------------------------------------------------------------------------
//open doc from menu
get-editor "checking_doc.robot" | get-text-viewer | set-caret-pos 7 17
get-editor "checking_doc.robot" | get-text-viewer | get-menu -path "Show documentation" | click

check-documentation-view-for-user-kw -kw_name "kw1_with_imported_kw" -path "/RobotProject/checking_doc.robot"  -arguments "\[\]" -spec "&lt;not documented&gt;"


//close view and open from Window/
get-view "Documentation View" | close
get-menu -path "Window/Show View/Documentation View" | click
with [get-view "Documentation View"] {
    get-button "Link with Selection" | get-property enablement | equals true | verify-true
    get-button Back | get-property enablement | equals false | verify-true
    get-button Forward | get-property enablement | equals false | verify-true
    get-button "Open Input" | get-property enablement | equals false | verify-true
    get-button "Open attached documentation in a Browser" | get-property enablement | equals false | verify-true
}

check-documentation-view   -is_empty true

//close view and click on kw to check if view is not open
get-view "Documentation View" | close

//set carte and open view
with [get-editor "checking_doc.robot" | get-text-viewer] {
    set-caret-pos 17 15
    get-menu -path "Show documentation" | click
}

//unselct linking
get-view "Documentation View" | get-button "Link with Selection" | click

//set caret and check if doc is the same
get-editor "checking_doc.robot" | get-text-viewer | set-caret-pos 13 10
check-documentation-view-for-user-kw -kw_name "kw_with_only_doc" -path "/RobotProject/checking_doc.robot"  -spec "I have only doc, no args"

get-editor "checking_doc.robot" | get-text-viewer | set-caret-pos 2  17
check-documentation-view-for-user-kw -kw_name "kw_with_only_doc" -path "/RobotProject/checking_doc.robot"  -spec "I have only doc, no args"
get-view "Documentation View" | close




//---------------------bugs ----------------------------------

//open doc from caret postion
with [get-editor "checking_doc.robot" | get-text-viewer] {
    set-caret-pos 13 11
    get-menu -path "Show documentation" | click
    //change caret position
    set-caret-pos 7 12
}
//kw from line 13 is shown
check-documentation-view-for-user-kw -kw_name "kw1_with_imported_kw" -path "/RobotProject/checking_doc.robot"  -arguments "\[\]" -spec "&lt;not documented&gt;"

//set cart on new postion and open menu - menu does nothoin, caret open doc view
with [get-editor "checking_doc.robot" | get-text-viewer] {
    set-caret-pos 22 9
    get-menu -path "Show documentation" | click
}
check-documentation-view-for-user-kw -kw_name "kw_with_doc_and_arg" -path "/RobotProject/checking_doc.robot"  -arguments "\[\*dict_1, \*\*list_2\]" 
	-spec "Second main kw"

//set carte on new place - doc is changed - ok
with [get-editor "checking_doc.robot" | get-text-viewer] {
    set-caret-pos 17 8

}
check-documentation-view-for-user-kw -kw_name "kw_with_only_doc" -path "/RobotProject/checking_doc.robot"  
	-spec "I have only doc, no args"
	
//remove linking - doc should not be changed
get-view "Documentation View" | get-button "Link with Selection" | click
get-editor "checking_doc.robot" | get-text-viewer | set-caret-pos 7 17

check-documentation-view-for-user-kw -kw_name "kw_with_only_doc" -path "/RobotProject/checking_doc.robot"  
	-spec "I have only doc, no args"

//---------------------------------bug 2 --------------------------------
//close doc view
get-view "Documentation View" | close

get-editor "checking_doc.robot" | get-text-viewer | set-caret-pos 13 20

//check if now doc view is not shown - bug 3
with [get-tab-folder -index 4] {
    get-property "pages[0]" | equals "Message Log" | verify-true
    get-property "pages[1]" | equals "Execution View" | verify-true
    get-property activePage | equals "Message Log" | verify-true
    get-property tabCount | equals 2 | verify-true
} 

//open doc
with [get-editor "checking_doc.robot" | get-text-viewer] {
    set-caret-pos 13 20
    get-menu -path "Show documentation" | click
    // change caret position
    set-caret-pos 22 10
}
check-documentation-view-for-user-kw -kw_name "kw_with_doc_and_arg" -path "/RobotProject/checking_doc.robot"  -arguments "\[\*dict_1, \*\*list_2\]" 
	-spec "Second main kw"
	
//turn of linking	
get-view "Documentation View" | get-button "Link with Selection" | click

//set carte in new place and open doc
with [get-editor "checking_doc.robot" | get-text-viewer] {
    set-caret-pos 13 16
    get-menu -path "Show documentation" | click
    set-caret-pos 35 8
}

check-documentation-view -kw_name "Log"  -arguments "\[message, level=INFO, html=False, console=False, repr=False\]" -library "BuiltIn" 
	-spec "Logs the given message with the given level.*"
	
	
------=_.content-0a7243a0-75d3-3d5f-9791-539de0e5b7ac--
