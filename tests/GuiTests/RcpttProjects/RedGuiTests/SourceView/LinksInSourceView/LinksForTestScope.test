--- RCPTT testcase ---
Format-Version: 1.0
Contexts: _821KoM_jEeWblO0vn84SSw
Element-Name: LinksForTestScope
Element-Type: testcase
Element-Version: 3.0
External-Reference: 
Id: _aJnaIM_iEeWblO0vn84SSw
Runtime-Version: 2.0.2.201511100828
Save-Time: 2/18/16 11:08 AM
Testcase-Type: ecl

------=_.content-0a7243a0-75d3-3d5f-9791-539de0e5b7ac
Content-Type: text/ecl
Entry-Name: .content

//open file and go to declaration (best matched will be selected)
get-view "Project Explorer" | get-tree | select "DuplicationKeywords/Test1.robot" | double-click
with [get-editor "Test1.robot" | get-text-viewer] {
    hover-text 6 8
    set-caret-pos 6 8
    key-type F3
}

//check taht "OnionTV" is selected
with [get-editor "Test1.robot" | get-text-viewer] {
    get-property "getSelectionText()" | equals OnionTV | verify-true
}

//check that no other editor was open
with [get-tab-folder -index 1] {
    get-property "pages[0]" | equals "Test1.robot" | verify-true
    get-property activePage | equals "Test1.robot" | verify-true
    get-property tabCount | equals 1 | verify-true
}

//open second editor
get-view "Project Explorer" | get-tree | select "DuplicationKeywords/Test2.tsv" 
    | select "DuplicationKeywords/Test2.tsv" | double-click
    
//select MyTest - duplicated keyword are in this file - first will be selected
with [get-editor "Test2.tsv" | get-text-viewer] {
    hover-text 6 8
    set-caret-pos 6 9
    open-declaration
    hover-text 6 8
}

//select theSameKw - open declartion - will open Res2.robot file
get-editor "Test2.tsv" | get-text-viewer | get-property "getSelectionText()" | equals "My_test" | verify-true
with [get-editor "Test2.tsv" | get-text-viewer] {
    set-caret-pos 7 9
    open-declaration
    hover-text 7 9
}
with [get-tab-folder -index 1] {
    get-property "pages[0]" | equals "Test1.robot" | verify-true
    get-property "pages[1]" | equals "Test2.tsv" | verify-true
    get-property "pages[2]" | equals "Res2.robot" | verify-true
    get-property activePage | equals "Res2.robot" | verify-true
    get-property tabCount | equals 3 | verify-true
}
get-editor "Res2.robot" | get-text-viewer | get-property "getSelectionText()" | equals "the_same_kw" | verify-true


//check errors
get-view Problems | get-tree | select "Errors (9 items)"
with [get-view Problems | get-tree] {
    get-item "Errors \\(9 items\\)" | get-property childCount | equals 9 | verify-true
    get-item "Errors \\(9 items\\)" | get-property "getText()" | equals "Errors (9 items)" | verify-true
    get-item "Errors \\(9 items\\)" | get-property "getItems().TreeItem[0].getText()" 
        | equals "Ambiguous keyword 'MyTest' reference. Matching keywords are defined in: [Test2, Test2, Test2]" 
        | verify-true
    get-item "Errors \\(9 items\\)" | get-property "getItems().TreeItem[1].getText()" 
        | equals "Ambiguous keyword 'theSameKw' reference. Matching keywords are defined in: [Res2, Res1]" | verify-true
    get-item "Errors \\(9 items\\)" | get-property "getItems().TreeItem[2].getText()" 
        | equals "Duplicated keyword definition 'my test'" | verify-true
    get-item "Errors \\(9 items\\)" | get-property "getItems().TreeItem[3].getText()" 
        | equals "Duplicated keyword definition 'My_test'" | verify-true
    get-item "Errors \\(9 items\\)" | get-property "getItems().TreeItem[4].getText()" 
        | equals "Duplicated keyword definition 'MyTest'" | verify-true
    get-item "Errors \\(9 items\\)" | get-property "getItems().TreeItem[5].getText()" 
        | equals "Duplicated keyword definition 'OnionTV'" | verify-true
    get-item "Errors \\(9 items\\)" | get-property "getItems().TreeItem[6].getText()" 
        | equals "Duplicated keyword definition 'ONIONTV'" | verify-true
    get-item "Errors \\(9 items\\)" | get-property "getItems().TreeItem[7].getText()" 
        | equals "Duplicated keyword definition 'Second kw'" | verify-true
    get-item "Errors \\(9 items\\)" | get-property "getItems().TreeItem[8].getText()" 
        | equals "Duplicated keyword definition 'SecondKW'" | verify-true
}

with [get-view Problems | get-tree] {
    get-item "Warnings \\(8 items\\)" | get-property "getItems().length" | equals 8 | verify-true
    get-item "Warnings \\(8 items\\)" | get-property "getItems().TreeItem[0].getText()" 
        | equals "The keyword 'my test' is masking the keyword 'MY_TEST' defined in Res2. Use 'Res2.MY_TEST' in this suite file if the latter is desired" 
        | verify-true
    get-item "Warnings \\(8 items\\)" | get-property "getItems().TreeItem[1].getText()" 
        | equals "The keyword 'My_test' is masking the keyword 'MY_TEST' defined in Res2. Use 'Res2.MY_TEST' in this suite file if the latter is desired" 
        | verify-true
    get-item "Warnings \\(8 items\\)" | get-property "getItems().TreeItem[2].getText()" 
        | equals "The keyword 'MyTest' is masking the keyword 'MY_TEST' defined in Res2. Use 'Res2.MY_TEST' in this suite file if the latter is desired" 
        | verify-true
    get-item "Warnings \\(8 items\\)" | get-property "getItems().TreeItem[3].getText()" 
        | equals "The keyword 'Onion${name}' is masking the keyword 'Onion${name}' defined in Res1. Use 'Res1.Onion${name}' in this suite file if the latter is desired" 
        | verify-true
    get-item "Warnings \\(8 items\\)" | get-property "getItems().TreeItem[4].getText()" 
        | equals "The keyword 'OnionTV' is masking the keyword 'OnionTV' defined in Res2. Use 'Res2.OnionTV' in this suite file if the latter is desired" 
        | verify-true
    get-item "Warnings \\(8 items\\)" | get-property "getItems().TreeItem[5].getText()" 
        | equals "The keyword 'OnionTV' is masking the keyword 'OnionTV' defined in Res2. Use 'Res2.OnionTV' in this suite file if the latter is desired" 
        | verify-true
    get-item "Warnings \\(8 items\\)" | get-property "getItems().TreeItem[6].getText()" 
        | equals "The keyword 'ONIONTV' is masking the keyword 'OnionTV' defined in Res2. Use 'Res2.OnionTV' in this suite file if the latter is desired" 
        | verify-true
    get-item "Warnings \\(8 items\\)" | get-property "getItems().TreeItem[7].getText()" 
        | equals "The keyword 'theSameKw' is masking the keyword 'the_same_kw' defined in Res2. Use 'Res2.the_same_kw' in this suite file if the latter is desired" 
        | verify-true
}
//checking 
------=_.content-0a7243a0-75d3-3d5f-9791-539de0e5b7ac--
