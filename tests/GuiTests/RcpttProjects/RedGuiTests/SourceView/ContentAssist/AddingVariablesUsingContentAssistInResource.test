--- RCPTT testcase ---
Format-Version: 1.0
Element-Name: AddingVariablesUsingContentAssistInResource
Element-Type: testcase
Element-Version: 3.0
External-Reference: 
Id: _9rWNQHf-EeWYifgNPLzx_Q
Runtime-Version: 2.0.2.201511100828
Save-Time: 3/7/16 4:33 PM
Testcase-Type: ecl

------=_.content-0a7243a0-75d3-3d5f-9791-539de0e5b7ac
Content-Type: text/ecl
Entry-Name: .content

//add resource file

get-view "Project Explorer" | get-tree | select RobotProject | select RobotProject | get-menu "New/Robot Resource file" 
    | click
with [get-window "New Robot Resource file"] {
    with [get-editbox -after [get-label "File name:"]] {
        set-text "resource_file.robot"
    }
    get-button Finish | click
}
//add variables section

with [get-editor "resource_file.robot" | get-text-viewer] {
    key-type "M1+SPACE"
    key-type Down -times 2
    key-type Enter
    
	//add varaibles
    key-type "M1+SPACE"
 
	with [get-window -from "CompletionProposalPopup.createProposalSelector()" | get-table] {
	    get-property itemCount | equals 6 | verify-true
	    get-property "getItems().TableItem[0].getText()" | equals "Fresh scalar" | verify-true
	    get-property "getItems().TableItem[1].getText()" | equals "Fresh list" | verify-true
	    get-property "getItems().TableItem[2].getText()" | equals "Fresh dictionary" | verify-true
	    get-property "getItems().TableItem[3].getText()" | equals "*** Keywords ***" | verify-true
	    get-property "getItems().TableItem[4].getText()" | equals "*** Settings ***" | verify-true
	    get-property "getItems().TableItem[5].getText()" | equals "*** Variables ***" | verify-true
	}
	key-type Esc
}

with [get-editor "resource_file.robot" | get-text-viewer] {
    set-caret-pos 2 1
    // add default scalar
    key-type "M1+SPACE"
    key-type Enter
    key-type Down
    type-text 1
    key-type Enter -times 2
    // add list
    key-type "M1+SPACE"
    key-type Down
    key-type Enter
    key-type Down
    key-type Enter -times 2
    
    //add dict
    key-type "M1+SPACE"
    key-type Down -times 2
    key-type Enter
    key-type Down
    key-type Enter -times 2
    
    //add scalar with new name
    key-type "M1+SPACE"
    key-type Enter
    type-text "my_scalar"
    key-type Tab
    type-text text
    key-type Enter -times 2
    
    // add list with new values
    key-type "M1+SPACE"
    key-type Down
    key-type Enter
    type-text "my list"
    key-type Tab
    type-text val1
    key-type Tab
    type-text val2
    key-type Enter -times 2
    
    //add dict wieth key=value
    key-type "M1+SPACE"
    key-type Down -times 2
    key-type Enter
    type-text "my_dict"
    key-type Tab
    type-text k1
    key-type Tab
    type-text light
    key-type Enter -times 2
}

get-editor "resource_file.robot" | get-text-viewer | get-property text | equals "*** Variables ***\n"
    + "${newScalar}    1\n"
    + "@{newList}    item    \n"
    + "&{newDict}    key=value    \n"
    + "${my_scalar}    text\n"
    + "@{my list}    val1    val2\n"
    + "&{my_dict}    k1=light" | verify-true
       
    
with [get-editor "resource_file.robot" | get-text-viewer] {
    set-caret-pos 8 1
    key-type "NUMPAD_ENTER" "\\u000D" -times 2
    key-type "M1+SPACE"
    
    with [get-window -from "CompletionProposalPopup.createProposalSelector()" | get-table] {
	    get-property itemCount | equals 6 | verify-true
	    get-property "getItems().TableItem[0].getText()" | equals "Fresh scalar" | verify-true
	    get-property "getItems().TableItem[1].getText()" | equals "Fresh list" | verify-true
	    get-property "getItems().TableItem[2].getText()" | equals "Fresh dictionary" | verify-true
	    get-property "getItems().TableItem[3].getText()" | equals "*** Keywords ***" | verify-true
	    get-property "getItems().TableItem[4].getText()" | equals "*** Settings ***" | verify-true
	    get-property "getItems().TableItem[5].getText()" | equals "*** Variables ***" | verify-true
	}
	key-type Esc
	
}

------=_.content-0a7243a0-75d3-3d5f-9791-539de0e5b7ac--
