--- RCPTT testcase ---
Format-Version: 1.0
Element-Name: AddingLoopWithNoContentAssist
Element-Type: testcase
Element-Version: 3.0
External-Reference: 
Id: _3DFlELkTEeWzJthH3JoEWQ
Runtime-Version: 2.0.1.201508250612
Save-Time: 1/14/16 11:40 AM
Testcase-Type: ecl

------=_.content-0a7243a0-75d3-3d5f-9791-539de0e5b7ac
Content-Type: text/ecl
Entry-Name: .content

with [get-view "Project Explorer" | get-tree] {
    select "RobotProject/TestFile.robot" | double-click
}

with [get-editor "TestFile.robot"] {
    with [get-text-viewer] {
        set-caret-pos 1 19
        key-type "NUMPAD_ENTER" "\\u000D"
        type-text "test 1"
        key-type Enter
        type-text "Log  12"
        key-type Enter
        type-text ":For  ${x}  In range  10"
        key-type Enter
        type-text "  Log  5"
        key-type Enter
        key-type BackSpace
        type-text ": FOR  ${y}  in range  1  5"
        key-type Enter
        type-text "  LOG  ${y}"
        key-type "M1+s"
    }
}

wait 1000
get-editor "TestFile.robot" | get-text-viewer | get-property text | equals "*** Test Cases ***\n"
    + "test 1\n"
    + "    Log  12\n"
    + "    :For  ${x}  In range  10\n"
    + "    \\  Log  5\n"
    + "    : FOR  ${y}  in range  1  5\n"
    + "    \\  LOG  ${y}" | verify-true
    
//check outline   
get-view Outline | get-tree | get-item "TestFile.robot/Test Cases/test 1/Log" | get-property index | equals 0 
    | verify-true
wait 500     
with [get-view Outline | get-tree] {
	//expand view
	get-item "TestFile.robot/Test Cases/test 1" | get-property caption | equals "test 1" 
    | verify-true
    wait 1000
    get-item "TestFile.robot/Test Cases/test 1" | get-property childCount | equals 3 | verify-true
    get-item "TestFile.robot/Test Cases/test 1" | get-property "getItems().TreeItem[0].getText()" | equals Log 
        | verify-true
    get-item "TestFile.robot/Test Cases/test 1" | get-property "getItems().TreeItem[1].getText()" | equals ":For" 
        | verify-true
    get-item "TestFile.robot/Test Cases/test 1" | get-property "getItems().TreeItem[2].getText()" | equals ": FOR" 
        | verify-true
    get-item "TestFile.robot/Test Cases/test 1/Log" | get-property childCount | equals 0 | verify-true
    get-item "TestFile.robot/Test Cases/test 1/:For" | get-property childCount | equals 0 | verify-true
    get-item "TestFile.robot/Test Cases/test 1/: FOR" | get-property childCount | equals 0 | verify-true
}   
    
//add tsv
get-view "Project Explorer" | get-tree | select RobotProject | select RobotProject | get-menu "New/Robot Test Suite" 
    | click
with [get-window "New Robot Test Suite"] {
    get-editbox -after [get-label "File name:"] | set-text "tsv_file"
    get-button "as .tsv file" | click
    get-button Finish | click
}

with [get-editor "tsv_file.tsv" | get-text-viewer] {
    set-caret-pos 1 19
    key-type Enter
    type-text "test 2"
    key-type Enter
    type-text ":for\t${z}\tIN\t 855"
    key-type Enter
    key-type Tab
    type-text Sho
    key-type "M1+SPACE"
    wait 300
    key-type Enter
    type-text "${z}"
    key-type Enter
    key-type BackSpace
    type-text ": fOR\t${i}\tIn Range\t700\t750"
    key-type Enter
    key-type Tab
    type-text "Log"
    key-type Tab
    type-text 66
    key-type Enter
    key-type BackSpace
    type-text SH
    key-type "M1+SPACE"
    wait 300
    key-type Down
    key-type Enter
    type-text "${SPACE}"
    key-type "M1+s"
}
wait 1000
get-editor "tsv_file.tsv" | get-text-viewer | get-property text | equals "*** Test Cases ***\n"
    + "test 2\n"
    + "\t:for\t${z}\tIN\t 855\n"
    + "\t\\\tShould Be Empty\t${z}\n"
    + "\t: fOR\t${i}\tIn Range\t700\t750\n"
    + "\t\\\tLog\t66\n"
    + "\tShould Be Equal\t${SPACE}" | verify-true
    
//check that outline 

try -times 4 -delay 1000 -command{
	get-view Outline | get-tree | get-item "tsv_file.tsv/Test Cases/test 2" | get-property childCount | equals 3 
    | verify-true
}
with [get-view Outline | get-tree] {
	//expanding view
    get-item "tsv_file.tsv/Test Cases/test 2" | get-property "getText()" | equals "test 2" | verify-true
    wait 1000
    get-item "tsv_file.tsv/Test Cases/test 2/:for" | get-property childCount | equals 0 | verify-true
    get-item "tsv_file.tsv/Test Cases/test 2/: fOR" | get-property childCount | equals 0 | verify-true
    
    get-item "tsv_file.tsv/Test Cases/test 2" | get-property childCount | equals 3 | verify-true
    get-item "tsv_file.tsv/Test Cases/test 2" | get-property "getItems().TreeItem[0].getText()" | equals ":for" 
        | verify-true
    get-item "tsv_file.tsv/Test Cases/test 2" | get-property "getItems().TreeItem[1].getText()" | equals ": fOR" 
        | verify-true
    get-item "tsv_file.tsv/Test Cases/test 2" | get-property "getItems().TreeItem[2].getText()" 
        | equals "Should Be Equal" | verify-true

}  
------=_.content-0a7243a0-75d3-3d5f-9791-539de0e5b7ac--
