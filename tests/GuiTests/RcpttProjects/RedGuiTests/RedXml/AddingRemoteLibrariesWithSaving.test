--- RCPTT testcase ---
Format-Version: 1.0
Element-Name: AddingRemoteLibrariesWithSaving
Element-Type: testcase
Element-Version: 3.0
External-Reference: 
Id: _a7l9oLkNEeWzJthH3JoEWQ
Runtime-Version: 2.0.2.201511100828
Save-Time: 3/14/16 1:33 PM
Testcase-Type: ecl

------=_.content-0a7243a0-75d3-3d5f-9791-539de0e5b7ac
Content-Type: text/ecl
Entry-Name: .content

get-view "Project Explorer" | get-tree | select "RobotProject/red.xml" | double-click

//add default remote
with [get-editor "RobotProject/red.xml"] {
    get-tab-folder | get-tab-item "Referenced libraries" | click
    get-section "Remote library locations" | get-table | select "...add new remote location" | key-type Enter
}
get-window "Add Remote location" | get-button OK | click

//add not existing remote
get-view "Project Explorer" | get-tree | select "RobotProject/red.xml" 
get-editor "RobotProject/red.xml" | get-section "Remote library locations" | get-table 
    | select "...add new remote location" | key-type Enter
with [get-window "Add Remote location"] {
    with [get-editbox -after [get-label URI]] {
        set-text "http://158.5.0.1:994/"
    }
    get-button OK | click
}
//add text as remote
get-view "Project Explorer" | get-tree | select "RobotProject/red.xml"
try -times 10 -delay 1000 -command{
	get-editor "RobotProject/red.xml" | get-canvas -after [get-label "RED Project"] | get-property "isBusy()" | equals false 
    | verify-true
}
get-editor "RobotProject/red.xml" | get-section "Remote library locations" | get-table 
    | select "...add new remote location" | key-type Enter
with [get-window "Add Remote location"] {
    with [get-editbox -after [get-label URI]] {
        key-type "M1+a"
        set-text nothing
    }
    get-button OK | click
}
//add and cancel
get-view "Project Explorer" | get-tree | select "RobotProject/red.xml"
get-editor "RobotProject/red.xml" | get-section "Remote library locations" | get-table 
    | select "...add new remote location" | key-type Enter
get-window "Add Remote location" | get-button Cancel | click

//save
get-button "Save (M1+S)" | click

//check image and red colour of font
with [get-editor "RobotProject/red.xml" | get-section "Remote library locations" | get-table] {
    get-property itemCount | equals 4 | verify-true
    get-property "getItems().TableItem[0].getText()" | equals "http://127.0.0.1:8270/" | verify-true
    get-property "getItems().TableItem[1].getText()" | equals "http://158.5.0.1:994/" | verify-true
    get-property "getItems().TableItem[2].getText()" | equals nothing | verify-true
    get-property "getItems().TableItem[3].getText()" | equals "...add new remote location" | verify-true
    get-item "http:\\/\\/127.0.0.1:8270\\/" | get-property "image.path" 
        | equals "org.robotframework.ide.eclipse.main.plugin/resources/remote_disconnected.png" | verify-true
    get-item "http:\\/\\/127.0.0.1:8270\\/" | get-property "styles[0].foregroundColor" | equals "#FF0000" | verify-true
    get-item "http:\\/\\/158.5.0.1:994\\/" | get-property "image.path" 
        | equals "org.robotframework.ide.eclipse.main.plugin/resources/remote_disconnected.png" | verify-true
    get-item "http:\\/\\/158.5.0.1:994\\/" | get-property "styles[0].foregroundColor" | equals "#FF0000" | verify-true
    get-item nothing | get-property "image.path" 
        | equals "org.robotframework.ide.eclipse.main.plugin/resources/remote_disconnected.png" | verify-true
    get-item nothing | get-property "styles[0].foregroundColor" | equals "#FF0000" | verify-true
}

//check Problems
get-view Problems | get-tree | select "Errors \\(.*\\)" | double-click
with [get-view Problems | get-tree] {
    get-property "getItems().TreeItem[0].getItems().TreeItem[0].getText()" 
        | equals "Unreachable remote server http://127.0.0.1:8270/" | verify-true
    get-property "getItems().TreeItem[0].getItems().TreeItem[1].getText()" 
        | equals "Unreachable remote server http://158.5.0.1:994/" | verify-true
    get-property "getItems().TreeItem[0].getItems().TreeItem[2].getText()" | equals "Unreachable remote server nothing" 
        | verify-true
    get-property "getItems().TreeItem[0].getText()" | equals "Errors (3 items)" | verify-true
}

------=_.content-0a7243a0-75d3-3d5f-9791-539de0e5b7ac--
