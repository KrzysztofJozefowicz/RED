--- RCPTT testcase ---
Format-Version: 1.0
Contexts: _1lEyQF06EeWeit3EM6sPPA
Element-Name: CheckingExecutionViewAfterClosing
Element-Type: testcase
Element-Version: 3.0
External-Reference: 
Id: __L5ekMjSEeWPuqMw6GC70Q
Runtime-Version: 2.0.2.201511100828
Save-Time: 2/1/16 12:59 PM
Testcase-Type: ecl

------=_.content-0a7243a0-75d3-3d5f-9791-539de0e5b7ac
Content-Type: text/ecl
Entry-Name: .content

proc "check-execution-view"{
//check execution view
	with [get-view "Execution View"] {
	    get-label "Passed: 3" | get-property caption | equals "Passed: 3" | verify-true
	    get-label "Failed: 0" | get-property caption | equals "Failed: 0" | verify-true
	}
	get-view "Execution View" | get-button "Expand All" | click
	with [get-view "Execution View" | get-tree] {
	    get-property itemCount | equals 1 | verify-true
	    get-property "getItems().TreeItem[0].getText()" | matches "ExecutionViewProject \\(0\.\d\d? s\\)" | verify-true
	    get-property "getItems().TreeItem[0].getItems().TreeItem[0].getText()" | matches "All Pass Tests \\(0\.\d\d? s\\)" 
	        | verify-true
	    get-property "getItems().TreeItem[0].getItems().TreeItem[0].getItems().TreeItem[0].getText()" 
	        | matches "pass test \\(0\.\d\d? s\\)" | verify-true
	    get-property "getItems().TreeItem[0].getItems().TreeItem[0].getItems().TreeItem[1].getText()" 
	        | matches "pass test 2 \\(0\.\d\d? s\\)" | verify-true
	    get-property "getItems().TreeItem[0].getItems().TreeItem[0].getItems().TreeItem[2].getText()" 
	        | matches "pass test 3 \\(0\.\d\d? s\\)" | verify-true
	}
}

//run test
with [get-view "Project Explorer" | get-tree] {
    select "ExecutionViewProject/all_pass_tests.robot" | double-click
    select "ExecutionViewProject/all_pass_tests.robot" | get-menu "Run As/1 Robot Test" | click
}
wait 2000

//check tha message loh is active
with [get-tab-folder -index 5] {
    get-property "pages[0]" | equals "Message Log" | verify-true
    get-property "pages[1]" | equals "Execution View" | verify-true
    get-property activePage | equals "Message Log" | verify-true
    get-property tabCount | equals 2 | verify-true
}

check-execution-view

//reopen view and check that is the same
get-view "Execution View" | close
get-menu "Window/Show View/Execution View" | click
get-view "Execution View" | get-button "Expand All" | click
check-execution-view

//reopen aplickation and check that view is clear
get-menu "File/Restart" | click
wait-until-eclipse-is-ready
get-view Welcome | close

//open Execution view and check if it is empty buttons are not selected
get-tab-folder -index 5 | get-tab-item "Execution View" | click

with [get-view "Execution View"] {
    get-label "Passed: 0" | get-property caption | equals "Passed: 0" | verify-true
    get-label "Failed: 0" | get-property caption | equals "Failed: 0" | verify-true
    
    get-tree | get-property itemCount | equals 0 | verify-true

    //buttons
    with [get-button "Expand All"] {
        get-property tooltip | equals "Expand All" | verify-true
        get-property selected | equals false | verify-true
        get-property index | equals 0 | verify-true
    }
    with [get-button "Collapse All"] {
        get-property tooltip | equals "Collapse All" | verify-true
        get-property selected | equals false | verify-true
        get-property index | equals 1 | verify-true
    }
    with [get-button "Show Failures Only"] {
        get-property tooltip | equals "Show Failures Only" | verify-true
        get-property selected | equals false | verify-true
        get-property index | equals 2 | verify-true
    }
    with [get-button "Rerun Tests"] {
        get-property tooltip | equals "Rerun Tests" | verify-true
        get-property selected | equals false | verify-true
        get-property index | equals 3 | verify-true
    }
    with [get-button "Rerun Failed Tests Only"] {
        get-property tooltip | equals "Rerun Failed Tests Only" | verify-true
        get-property selected | equals false | verify-true
        get-property index | equals 4 | verify-true
    }
}


------=_.content-0a7243a0-75d3-3d5f-9791-539de0e5b7ac--
